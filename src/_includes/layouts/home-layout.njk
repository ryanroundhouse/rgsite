{% extends "layouts/base-layout.njk" %}

{% block projects %}
  <div class="row m-0">
    <h1>Latest Projects</h1>
  </div>
  <div class="row m-0 mx-n3">
    {% set maxNumberOfProjectsToShow = projects.length if projects.length < 3 else 3 %}
    {% for i in range(0, maxNumberOfProjectsToShow) %}
      <article class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 mb-4 articleLink">
        <div class="three-row-aligned h-100 bg-white p-2 text-center rounded">
          <a class="wholeDivLink" href="/project/{{ projects[i].slug }}/" aria-label="Read more on {{ projects[i].title }}"></a>
          <div>
            <h2>{{ projects[i].title }}</h2><br/>
            <time datetime="{{ projects[i].date | dateIso }}">{{ projects[i].date | dateReadable }}</time>
          </div>
          <div>
            {% for tech in projects[i].technologies %}
              <img src="{{tech.logo.url}}" alt="{{tech.logo.alternativeText}}" title="{{tech.logo.alternativeText}}"/>
            {% endfor %}
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
  <div class="row m-0">
    <a href="/project-list/" class="ml-auto">View older projects</a>
  </div>
{% endblock projects %}

{% block posts %}
  <div class="row m-0">
    <h1>Latest Posts</h1>
  </div>
  <div class="row m-0 mx-n3">
    {% set maxNumberOfPostsToShow = posts.length if posts.length < 3 else 3 %}
    {% for i in range(0, maxNumberOfPostsToShow) %}
      <article class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 mb-4 articleLink">
        <div class="three-row-aligned h-100 bg-white p-2 text-center rounded">
          <a class="wholeDivLink" href="/post/{{ posts[i].slug }}/" aria-label="Read more on {{ posts[i].title }}"></a>
          <div>
            <h2>{{ posts[i].title }}</h2><br/>
            <p>{{ posts[i].excerpt }}</p>
          </div>
          <div class="align-self-end">
            <time datetime="{{ posts[i].date | dateIso }}">{{ posts[i].date | dateReadable }}</time>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
  <div class="row m-0">
    <a href="/post-list/" class="ml-auto">View older posts</a>
  </div>
{% endblock posts %}

{% block process %}
  <div class="row m-0">
    <h1>Latest Process</h1>
  </div>
  <div class="row m-0 mx-n3">
    {% set processLength = collections.process.length if collections.process.length < 3 else 3 %}
    {% set fullProcessLength = collections.process.length - 1 %}
    {% set maxNumberOfProcessToShow = collections.process.length if collections.process.length < 3 else 3 %}
    {% for i in range(0, maxNumberOfProcessToShow) %}
      <article class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-4 mb-4 articleLink">
        <div class="three-row-aligned h-100 bg-white p-2 text-center rounded">
          <a class="wholeDivLink" href="{{ collections.process[fullProcessLength - i].url | url }}" aria-label="Read more on {{ collections.process[fullProcessLength - i].data.title }}"></a>
          <div>
            <h2>{{ collections.process[fullProcessLength - i].data.title }}</h2><br/>
            <p>{% excerpt collections.process[fullProcessLength - i] %}</p>
          </div>
          <div class="align-self-end">
            <time datetime="{{ collections.process[fullProcessLength - i].date | dateIso }}">{{ collections.process[fullProcessLength - i].date | dateReadable }}</time>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
  <div class="row m-0">
    <a href="/tags/process/" class="ml-auto">View older process</a>
  </div>
{% endblock process %}